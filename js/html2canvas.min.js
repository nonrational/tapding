/*
  html2canvas 0.4.0 <http://html2canvas.hertzen.com>
  Copyright (c) 2013 Niklas von Hertzen (@niklasvh)

  Released under MIT License
*/
(function(a,b,c){function h(b){d.logging&&a.console&&a.console.log&&a.console.log(b)}function i(a,b,c,e,f,g){var h=d.Util.getCSS(b,a,f),i,j,k,l;h.length===1&&(l=h[0],h=[],h[0]=l,h[1]=l);if(h[0].toString().indexOf("%")!==-1)k=parseFloat(h[0])/100,j=c.width*k,a!=="backgroundSize"&&(j-=(g||e).width*k);else if(a==="backgroundSize")if(h[0]==="auto")j=e.width;else if(h[0].match(/contain|cover/)){var m=d.Util.resizeBounds(e.width,e.height,c.width,c.height,h[0]);j=m.width,i=m.height}else j=parseInt(h[0],10);else j=parseInt(h[0],10);return h[1]==="auto"?i=j/e.width*e.height:h[1].toString().indexOf("%")!==-1?(k=parseFloat(h[1])/100,i=c.height*k,a!=="backgroundSize"&&(i-=(g||e).height*k)):i=parseInt(h[1],10),[j,i]}function j(a){return{zindex:a,children:[]}}function k(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){c.push({type:"variable",name:a,arguments:b})}}}"use strict";var d={},e,f,g;d.Util={},d.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),d.Util.parseBackgroundImage=function(a){var b=" \r\n\t",c,d,e,f,g,h=[],i,j=0,k=0,l,m,n=function(){c&&(d.substr(0,1)==='"'&&(d=d.substr(1,d.length-2)),d&&m.push(d),c.substr(0,1)==="-"&&(f=c.indexOf("-",1)+1)>0&&(e=c.substr(0,f),c=c.substr(f)),h.push({prefix:e,method:c.toLowerCase(),value:g,args:m})),m=[],c=e=d=g=""};n();for(var o=0,p=a.length;o<p;o++){i=a[o];if(j===0&&b.indexOf(i)>-1)continue;switch(i){case'"':l?l===i&&(l=null):l=i;break;case"(":if(l)break;if(j===0){j=1,g+=i;continue}k++;break;case")":if(l)break;if(j===1){if(k===0){j=0,g+=i,n();continue}k--}break;case",":if(l)break;if(j===0){n();continue}if(j===1&&k===0&&!c.match(/^url$/i)){m.push(d),d="",g+=i;continue}}g+=i,j===0?c+=i:d+=i}return n(),h},d.Util.Bounds=function(a){var b,c={};if(a.getBoundingClientRect)return b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=b.width||b.right-b.left,c.height=b.height||b.bottom-b.top,c},d.Util.getCSS=function(a,g,h){function k(b,c){var d=a.runtimeStyle&&a.runtimeStyle[b],e,f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(e=f.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":c||0,c=f.pixelLeft+"px",f.left=e,d&&(a.runtimeStyle.left=d)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}var i,j=g.match(/^background(Size|Position)$/);e!==a&&(f=b.defaultView.getComputedStyle(a,null)),i=f[g];if(j){i=(i||"").split(","),i=i[h||0]||i[0]||"auto",i=d.Util.trimText(i).split(" ");if(g!=="backgroundSize"||!!i[0]&&!i[0].match(/cover|contain|auto/)){i[0]=i[0].indexOf("%")===-1?k(g+"X",i[0]):i[0];if(i[1]===c){if(g==="backgroundSize")return i[1]="auto",i;i[1]=i[0]}i[1]=i[1].indexOf("%")===-1?k(g+"Y",i[1]):i[1]}}else if(/border(Top|Bottom)(Left|Right)Radius/.test(g)){var l=i.split(" ");l.length<=1&&(l[1]=l[0]),l[0]=parseInt(l[0],10),l[1]=parseInt(l[1],10),i=l}return i},d.Util.resizeBounds=function(a,b,c,d,e){var f=c/d,g=a/b,h,i;return!e||e==="auto"?(h=c,i=d):f<g^e==="contain"?(i=d,h=d*g):(h=c,i=c/g),{width:h,height:i}},d.Util.BackgroundPosition=function(a,b,c,d,e){var f=i("backgroundPosition",a,b,c,d,e);return{left:f[0],top:f[1]}},d.Util.BackgroundSize=function(a,b,c,d){var e=i("backgroundSize",a,b,c,d);return{width:e[0],height:e[1]}},d.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},d.Util.Children=function(a){var b;try{b=a.nodeName&&a.nodeName.toUpperCase()==="IFRAME"?a.contentDocument||a.contentWindow.document:function(a){var b=[];return a!==null&&function(a,b){var d=a.length,e=0;if(typeof b.length=="number")for(var f=b.length;e<f;e++)a[d++]=b[e];else while(b[e]!==c)a[d++]=b[e++];return a.length=d,a}(b,a),b}(a.childNodes)}catch(d){h("html2canvas.Util.Children failed with exception: "+d.message),b=[]}return b},d.Util.Font=function(){var a={};return function(b,d,e){if(a[b+"-"+d]!==c)return a[b+"-"+d];var f=e.createElement("div"),g=e.createElement("img"),h=e.createElement("span"),i="Hidden Text",j,k,l;return f.style.visibility="hidden",f.style.fontFamily=b,f.style.fontSize=d,f.style.margin=0,f.style.padding=0,e.body.appendChild(f),g.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",g.width=1,g.height=1,g.style.margin=0,g.style.padding=0,g.style.verticalAlign="baseline",h.style.fontFamily=b,h.style.fontSize=d,h.style.margin=0,h.style.padding=0,h.appendChild(e.createTextNode(i)),f.appendChild(h),f.appendChild(g),j=g.offsetTop-h.offsetTop+1,f.removeChild(h),f.appendChild(e.createTextNode(i)),f.style.lineHeight="normal",g.style.verticalAlign="super",k=g.offsetTop-f.offsetTop+1,l={baseline:j,lineWidth:1,middle:k},a[b+"-"+d]=l,e.body.removeChild(f),l}}(),function(){d.Generate={};var a=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];d.Generate.parseGradient=function(b,c){var d,e,f=a.length,g,h,i,j,k,l,m,n,o,p;for(e=0;e<f;e+=1){g=b.match(a[e]);if(g)break}if(g)switch(g[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":d={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},i=g[2].match(/\w+/g);if(i){j=i.length;for(e=0;e<j;e+=1)switch(i[e]){case"top":d.y0=0,d.y1=c.height;break;case"right":d.x0=c.width,d.x1=0;break;case"bottom":d.y0=c.height,d.y1=0;break;case"left":d.x0=0,d.x1=c.width}}d.x0===null&&d.x1===null&&(d.x0=d.x1=c.width/2),d.y0===null&&d.y1===null&&(d.y0=d.y1=c.height/2),i=g[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(i){j=i.length,k=1/Math.max(j-1,1);for(e=0;e<j;e+=1)l=i[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),l[2]?(h=parseFloat(l[2]),l[3]==="%"?h/=100:h/=c.width):h=e*k,d.colorStops.push({color:l[1],stop:h})}break;case"-webkit-gradient":d={type:g[2]==="radial"?"circle":g[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},i=g[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),i&&(d.x0=i[1]*c.width/100,d.y0=i[2]*c.height/100,d.x1=i[3]*c.width/100,d.y1=i[4]*c.height/100),i=g[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);if(i){j=i.length;for(e=0;e<j;e+=1)l=i[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),h=parseFloat(l[2]),l[1]==="from"&&(h=0),l[1]==="to"&&(h=1),d.colorStops.push({color:l[3],stop:h})}break;case"-moz-linear-gradient":d={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},i=g[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),i&&(d.x0=i[1]*c.width/100,d.y0=i[2]*c.height/100,d.x1=c.width-d.x0,d.y1=c.height-d.y0),i=g[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);if(i){j=i.length,k=1/Math.max(j-1,1);for(e=0;e<j;e+=1)l=i[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),l[2]?(h=parseFloat(l[2]),l[3]&&(h/=100)):h=e*k,d.colorStops.push({color:l[1],stop:h})}break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":d={type:"circle",x0:0,y0:0,x1:c.width,y1:c.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},i=g[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),i&&(d.cx=i[1]*c.width/100,d.cy=i[2]*c.height/100),i=g[3].match(/\w+/),l=g[4].match(/[a-z\-]*/);if(i&&l)switch(l[0]){case"farthest-corner":case"cover":case"":m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),n=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),p=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2)),d.rx=d.ry=Math.max(m,n,o,p);break;case"closest-corner":m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),n=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),p=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2)),d.rx=d.ry=Math.min(m,n,o,p);break;case"farthest-side":i[0]==="circle"?d.rx=d.ry=Math.max(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=i[0],d.rx=Math.max(d.cx,d.x1-d.cx),d.ry=Math.max(d.cy,d.y1-d.cy));break;case"closest-side":case"contain":i[0]==="circle"?d.rx=d.ry=Math.min(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=i[0],d.rx=Math.min(d.cx,d.x1-d.cx),d.ry=Math.min(d.cy,d.y1-d.cy))}i=g[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(i){j=i.length,k=1/Math.max(j-1,1);for(e=0;e<j;e+=1)l=i[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),l[2]?(h=parseFloat(l[2]),l[3]==="%"?h/=100:h/=c.width):h=e*k,d.colorStops.push({color:l[1],stop:h})}}return d},d.Generate.Gradient=function(a,c){if(c.width===0||c.height===0)return;var e=b.createElement("canvas"),f=e.getContext("2d"),g,i,j,k;e.width=c.width,e.height=c.height,g=d.Generate.parseGradient(a,c);if(g)if(g.type==="linear"){i=f.createLinearGradient(g.x0,g.y0,g.x1,g.y1);for(j=0,k=g.colorStops.length;j<k;j+=1)try{i.addColorStop(g.colorStops[j].stop,g.colorStops[j].color)}catch(l){h(["failed to add color stop: ",l,"; tried to add: ",g.colorStops[j],"; stop: ",j,"; in: ",a])}f.fillStyle=i,f.fillRect(0,0,c.width,c.height)}else if(g.type==="circle"){i=f.createRadialGradient(g.cx,g.cy,0,g.cx,g.cy,g.rx);for(j=0,k=g.colorStops.length;j<k;j+=1)try{i.addColorStop(g.colorStops[j].stop,g.colorStops[j].color)}catch(l){h(["failed to add color stop: ",l,"; tried to add: ",g.colorStops[j],"; stop: ",j,"; in: ",a])}f.fillStyle=i,f.fillRect(0,0,c.width,c.height)}else if(g.type==="ellipse"){var m=b.createElement("canvas"),n=m.getContext("2d"),o=Math.max(g.rx,g.ry),p=o*2,q;m.width=m.height=p,i=n.createRadialGradient(g.rx,g.ry,0,g.rx,g.ry,o);for(j=0,k=g.colorStops.length;j<k;j+=1)try{i.addColorStop(g.colorStops[j].stop,g.colorStops[j].color)}catch(l){h(["failed to add color stop: ",l,"; tried to add: ",g.colorStops[j],"; stop: ",j,"; in: ",a])}n.fillStyle=i,n.fillRect(0,0,p,p),f.fillStyle=g.colorStops[j-1].color,f.fillRect(0,0,e.width,e.height),f.drawImage(m,g.cx-g.rx,g.cy-g.ry,2*g.rx,2*g.ry)}return e},d.Generate.ListAlpha=function(a){var b="",c;do c=a%26,b=String.fromCharCode(c+64)+b,a=a/26;while(a*26>26);return b},d.Generate.ListRoman=function(a){var b=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],c=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],d="",e,f=b.length;if(a<=0||a>=4e3)return a;for(e=0;e<f;e+=1)while(a>=c[e])a-=c[e],d+=b[e];return d}}(),d.Parse=function(e,f){function s(){return Math.max(Math.max(l.body.scrollWidth,l.documentElement.scrollWidth),Math.max(l.body.offsetWidth,l.documentElement.offsetWidth),Math.max(l.body.clientWidth,l.documentElement.clientWidth))}function t(){return Math.max(Math.max(l.body.scrollHeight,l.documentElement.scrollHeight),Math.max(l.body.offsetHeight,l.documentElement.offsetHeight),Math.max(l.body.clientHeight,l.documentElement.clientHeight))}function u(a,b){var c=parseInt(p(a,b),10);return isNaN(c)?0:c}function v(a,b,c,d,e,f){f!=="transparent"&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),i+=1)}function w(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(a,b,c){if(a.length>0)return b+c.toUpperCase()});case"uppercase":return a.toUpperCase();default:return a}}function x(a){return/^(normal|none|0px)$/.test(a)}function y(a,b,c,e){a!==null&&d.Util.trimText(a).length>0&&(e.fillText(a,b,c),i+=1)}function z(a,b,c,e){var f=!1,g=p(b,"fontWeight"),h=p(b,"fontFamily"),i=p(b,"fontSize");switch(parseInt(g,10)){case 401:g="bold";break;case 400:g="normal"}a.setVariable("fillStyle",e),a.setVariable("font",[p(b,"fontStyle"),p(b,"fontVariant"),g,i,h].join(" ")),a.setVariable("textAlign",f?"right":"left");if(c!=="none")return d.Util.Font(h,i,l)}function A(a,b,c,d,e){switch(b){case"underline":v(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":v(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":v(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function B(a,b,c,e){var f;if(m.rangeBounds){if(c!=="none"||d.Util.trimText(b).length!==0)f=C(b,a.node,a.textOffset);a.textOffset+=b.length}else if(a.node&&typeof a.node.nodeValue=="string"){var g=e?a.node.splitText(b.length):null;f=D(a.node),a.node=g}return f}function C(a,b,c){var d=l.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function D(a){var b=a.parentNode,c=l.createElement("wrapper"),e=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),b.replaceChild(c,a);var f=d.Util.Bounds(c);return b.replaceChild(e,c),f}function E(a,b,c){var e=c.ctx,g=p(a,"color"),h=p(a,"textDecoration"),i=p(a,"textAlign"),j,k,l={node:b,textOffset:0};d.Util.trimText(b.nodeValue).length>0&&(b.nodeValue=w(b.nodeValue,p(a,"textTransform")),i=i.replace(["-webkit-auto"],["auto"]),k=!f.letterRendering&&/^(left|right|justify|auto)$/.test(i)&&x(p(a,"letterSpacing"))?b.nodeValue.split(/(\b| )/):b.nodeValue.split(""),j=z(e,a,h,g),f.chinese&&k.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),k.splice.apply(k,a))}),k.forEach(function(a,b){var c=B(l,a,h,b<k.length-1);c&&(y(a,c.left,c.bottom,e),A(e,h,c,j,g))}))}function F(a,b){var c=l.createElement("boundelement"),e,f;return c.style.display="inline",e=a.style.listStyleType,a.style.listStyleType="none",c.appendChild(l.createTextNode(b)),a.insertBefore(c,a.firstChild),f=d.Util.Bounds(c),a.removeChild(c),a.style.listStyleType=e,f}function G(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){while(d[++b]!==a)d[b].nodeType===1&&c++;return c}return-1}function H(a,b){var c=G(a),e;switch(b){case"decimal":e=c;break;case"decimal-leading-zero":e=c.toString().length===1?c="0"+c.toString():c.toString();break;case"upper-roman":e=d.Generate.ListRoman(c);break;case"lower-roman":e=d.Generate.ListRoman(c).toLowerCase();break;case"lower-alpha":e=d.Generate.ListAlpha(c).toLowerCase();break;case"upper-alpha":e=d.Generate.ListAlpha(c)}return e+=". ",e}function I(a,b,c){var d,e,f=b.ctx,g=p(a,"listStyleType"),h;if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(g)){e=H(a,g),h=F(a,e),z(f,a,"none",p(a,"color"));if(p(a,"listStylePosition")==="inside")f.setVariable("textAlign","left"),d=c.left;else return;y(e,d,h.bottom,f)}}function J(a){var b=e[a];return b&&b.succeeded===!0?b.img:!1}function K(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function L(a,b){var c;return b?a!=="auto"?(c=j(a),b.children.push(c),c):b:(c=j(0),c)}function M(a,b,c,d,e){var f=u(b,"paddingLeft"),g=u(b,"paddingTop"),h=u(b,"paddingRight"),i=u(b,"paddingBottom");Z(a,c,0,0,c.width,c.height,d.left+f+e[3].width,d.top+g+e[0].width,d.width-(e[1].width+e[3].width+f+h),d.height-(e[0].width+e[2].width+g+i))}function N(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:u(a,"border"+b+"Width"),color:p(a,"border"+b+"Color")}})}function O(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return p(a,"border"+b+"Radius")})}function Q(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[Q(a,g,j,l),Q(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function R(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function S(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function T(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-l,r=f-m,s=g-o;return{topLeftOuter:P(d,e,h,i).topLeft.subdivide(.5),topLeftInner:P(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:P(d+p,e,j,k).topRight.subdivide(.5),topRightInner:P(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:P(d+r,e+q,m,l).bottomRight.subdivide(.5),bottomRightInner:P(d+Math.min(r,f+c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,m-c[1].width),Math.max(0,l-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:P(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:P(d+c[3].width,e+s,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function U(a,b,c,d,e){var f=p(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":R(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),R(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),R(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),R(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:R(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),R(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),R(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),R(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function V(a,b,c){var d=b.left,e=b.top,f=b.width,g=b.height,h,i,j,k,l,m,n=O(a),o=T(b,n,c),p={clip:U(a,o,c,n,b),borders:[]};for(h=0;h<4;h++)if(c[h].width>0){i=d,j=e,k=f,l=g-c[2].width;switch(h){case 0:l=c[0].width,m=S({c1:[i,j],c2:[i+k,j],c3:[i+k-c[1].width,j+l],c4:[i+c[3].width,j+l]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:i=d+f-c[1].width,k=c[1].width,m=S({c1:[i+k,j],c2:[i+k,j+l+c[2].width],c3:[i,j+l],c4:[i,j+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:j=j+g-c[2].width,l=c[2].width,m=S({c1:[i+k,j+l],c2:[i,j+l],c3:[i+c[3].width,j],c4:[i+k-c[2].width,j]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:k=c[3].width,m=S({c1:[i,j+l+c[2].width],c2:[i,j],c3:[i+k,j+c[0].width],c4:[i+k,j+l]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:m,color:c[h].color})}return p}function W(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[b===0?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function X(a,b,c){c!=="transparent"&&(a.setVariable("fillStyle",c),W(a,b),a.fill(),i+=1)}function Y(a,b,c){var d=l.createElement("valuewrap"),e=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"],f,g;e.forEach(function(b){try{d.style[b]=p(a,b)}catch(c){h("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}),d.style.borderColor="black",d.style.borderStyle="solid",d.style.display="block",d.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(a.type)||a.nodeName==="SELECT")d.style.lineHeight=p(a,"height");d.style.top=b.top+"px",d.style.left=b.left+"px",f=a.nodeName==="SELECT"?(a.options[a.selectedIndex]||0).text:a.value,f||(f=a.placeholder),g=l.createTextNode(f),d.appendChild(g),o.appendChild(d),E(a,g,c),o.removeChild(d)}function Z(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),i+=1}function $(c,e){var f=a.getComputedStyle(c,e);if(!f||!f.content||f.content==="none"||f.content==="-moz-alt-content")return;var g=f.content+"",h=g.substr(0,1);h===g.substr(g.length-1)&&h.match(/'|"/)&&(g=g.substr(1,g.length-2));var i=g.substr(0,3)==="url",j=b.createElement(i?"img":"span");return j.className=q+"-before "+q+"-after",Object.keys(f).filter(_).forEach(function(a){j.style[a]=f[a]}),i?j.src=d.Util.parseBackgroundImage(g)[0].args[0]:j.innerHTML=g,j}function _(b){return isNaN(a.parseInt(b,10))}function ba(a,b){var c=$(a,":before"),d=$(a,":after");if(!c&&!d)return;c&&(a.className+=" "+q+"-before",a.parentNode.insertBefore(c,a),bm(c,b,!0),a.parentNode.removeChild(c),a.className=a.className.replace(q+"-before","").trim()),d&&(a.className+=" "+q+"-after",a.appendChild(d),bm(d,b,!0),a.removeChild(d),a.className=a.className.replace(q+"-after","").trim())}function bb(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function bc(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),W(a,i),a.save(),a.clip(),bb(a,b,c,d),a.restore()}function bd(a,b,c){v(a,b.left,b.top,b.width,b.height,c)}function be(a,b,c,e,f){var g=d.Util.BackgroundSize(a,b,e,f),h=d.Util.BackgroundPosition(a,b,e,f,g),i=p(a,"backgroundRepeat").split(",").map(function(a){return a.trim()});e=bg(e,g),i=i[f]||i[0];switch(i){case"repeat-x":bc(c,e,h,b,b.left,b.top+h.top,99999,e.height);break;case"repeat-y":bc(c,e,h,b,b.left+h.left,b.top,e.width,99999);break;case"no-repeat":bc(c,e,h,b,b.left+h.left,b.top+h.top,e.width,e.height);break;default:bb(c,e,h,{top:b.top,left:b.left,width:e.width,height:e.height})}}function bf(a,b,c){var e=p(a,"backgroundImage"),f=d.Util.parseBackgroundImage(e),g,i=f.length;while(i--){e=f[i];if(!e.args||e.args.length===0)continue;var j=e.method==="url"?e.args[0]:e.value;g=J(j),g?be(a,b,c,g,i):h("html2canvas: Error loading background:",e)}}function bg(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=l.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),Z(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function bh(a,b,c){var d=p(b,"opacity")*(c?c.opacity:1);return a.setVariable("globalAlpha",d),d}function bi(a,b,c){var e=k(b?c.width:s(),b?c.height:t()),g={ctx:e,zIndex:L(p(a,"zIndex"),b?b.zIndex:null),opacity:bh(e,a,b),cssPosition:p(a,"position"),borders:N(a),clip:b&&b.clip?d.Util.Extend({},b.clip):null};return f.useOverflow===!0&&/(hidden|scroll|auto)/.test(p(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(g.clip=g.clip?K(g.clip,c):c),g.zIndex.children.push(g),g}function bj(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=K(d,c)),d}function bk(a,b,c){var e=d.Util.Bounds(a),f,g=n.test(a.nodeName)?"#efefef":p(a,"backgroundColor"),i=bi(a,b,e),j=i.borders,k=i.ctx,l=bj(j,e,i.clip),m=V(a,e,j);W(k,m.clip),k.save(),k.clip(),l.height>0&&l.width>0&&(bd(k,e,g),bf(a,l,k)),k.restore(),m.borders.forEach(function(a){X(k,a.args,a.color)}),c||ba(a,i);switch(a.nodeName){case"IMG":(f=J(a.getAttribute("src")))?M(k,a,f,e,j):h("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder).length>0&&Y(a,e,i);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&Y(a,e,i);break;case"SELECT":(a.options||a.placeholder||"").length>0&&Y(a,e,i);break;case"LI":I(a,i,l);break;case"CANVAS":M(k,a,a,e,j)}return i}function bl(a){return p(a,"display")!=="none"&&p(a,"visibility")!=="hidden"&&!a.hasAttribute("data-html2canvas-ignore")}function bm(a,b,c){bl(a)&&(b=bk(a,b,c)||b,n.test(a.nodeName)||d.Util.Children(a).forEach(function(d){d.nodeType===1?bm(d,b,c):d.nodeType===3&&E(a,d,b)}))}function bn(a,b){function h(a){var b=d.Util.Children(a),c=b.length,e,f,i,j,k;for(k=0;k<c;k+=1){j=b[k];if(j.nodeType===3)g+=j.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(j.nodeType===1&&!/^(script|meta|title)$/.test(j.nodeName.toLowerCase())){g+="<"+j.nodeName.toLowerCase();if(j.hasAttributes()){e=j.attributes,i=e.length;for(f=0;f<i;f+=1)g+=" "+e[f].name+'="'+e[f].value+'"'}g+=">",h(j),g+="</"+j.nodeName.toLowerCase()+">"}}}var c=new Image,e=s(),f=t(),g="";h(a),c.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+e+"' height='"+f+"'>","<foreignObject width='"+e+"' height='"+f+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",g.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),c.onload=function(){b.svgRender=c}}function bo(){var a=bk(g,null);return m.svgRendering&&bn(b.documentElement,a),Array.prototype.slice.call(g.children,0).forEach(function(b){bm(b,a)}),a.backgroundColor=p(b.documentElement,"backgroundColor"),o.removeChild(r),a}a.scroll(0,0);var g=f.elements===c?b.body:f.elements[0],i=0,l=g.ownerDocument,m=d.Util.Support(f,l),n=new RegExp("("+f.ignoreElements+")"),o=l.body,p=d.Util.getCSS,q="___html2canvas___pseudoelement",r=l.createElement("style");r.innerHTML="."+q+'-before:before { content: "" !important; display: none !important; }'+"."+q+'-after:after { content: "" !important; display: none !important; }',o.appendChild(r),e=e||{};var P=function(a){return function(b,c,d,e){var f=d*a,g=e*a,h=b+d,i=c+e;return{topLeft:Q({x:b,y:i},{x:b,y:i-g},{x:h-f,y:c},{x:h,y:c}),topRight:Q({x:b,y:c},{x:b+f,y:c},{x:h,y:i-g},{x:h,y:i}),bottomRight:Q({x:h,y:c},{x:h,y:c+g},{x:b+f,y:i},{x:b,y:i}),bottomLeft:Q({x:h,y:i},{x:h-f,y:i},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3));return bo()},d.Preload=function(e){function s(a){p.href=a,p.href=p.href;var b=p.protocol+p.host;return b===g}function t(){h("html2canvas: start: images: "+f.numLoaded+" / "+f.numTotal+" (failed: "+f.numFailed+")"),!f.firstRun&&f.numLoaded>=f.numTotal&&(h("Finished loading images: # "+f.numTotal+" (failed: "+f.numFailed+")"),typeof e.complete=="function"&&e.complete(f))}function u(b,d,g){var h,i=e.proxy,j;p.href=b,b=p.href,h="html2canvas_"+k++,g.callbackname=h,i.indexOf("?")>-1?i+="&":i+="?",i+="url="+encodeURIComponent(b)+"&callback="+h,j=m.createElement("script"),a[h]=function(b){b.substring(0,6)==="error:"?(g.succeeded=!1,f.numLoaded++,f.numFailed++,t()):(B(d,g),d.src=b),a[h]=c;try{delete a[h]}catch(e){}j.parentNode.removeChild(j),j=null,delete g.script,delete g.callbackname},j.setAttribute("type","text/javascript"),j.setAttribute("src",i),g.script=j,a.document.body.appendChild(j)}function v(b,c){var e=a.getComputedStyle(b,c),f=e.content;f.substr(0,3)==="url"&&i.loadImage(d.Util.parseBackgroundImage(f)[0].args[0]),z(e.backgroundImage,b)}function w(a){v(a,":before"),v(a,":after")}function x(a,b){var e=d.Generate.Gradient(a,b);e!==c&&(f[a]={img:e,succeeded:!0},f.numTotal++,f.numLoaded++,t())}function y(a){return a&&a.method&&a.args&&a.args.length>0}function z(a,b){var e;d.Util.parseBackgroundImage(a).filter(y).forEach(function(a){a.method==="url"?i.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(e===c&&(e=d.Util.Bounds(b)),x(a.value,e))})}function A(a){var b=!1;try{d.Util.Children(a).forEach(function(a){A(a)})}catch(e){}try{b=a.nodeType}catch(f){b=!1,h("html2canvas: failed to access some element's nodeType - Exception: "+f.message)}if(b===1||b===c){w(a);try{z(d.Util.getCSS(a,"backgroundImage"),a)}catch(e){h("html2canvas: failed to get background-image - Exception: "+e.message)}z(a)}}function B(b,d){b.onload=function(){d.timer!==c&&a.clearTimeout(d.timer),f.numLoaded++,d.succeeded=!0,b.onerror=b.onload=null,t()},b.onerror=function(){if(b.crossOrigin==="anonymous"){a.clearTimeout(d.timer);if(e.proxy){var c=b.src;b=new Image,d.img=b,b.src=c,u(b.src,b,d);return}}f.numLoaded++,f.numFailed++,d.succeeded=!1,b.onerror=b.onload=null,t()}}var f={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},g,i,j,k=0,l=e.elements[0]||b.body,m=l.ownerDocument,n=m.images,o=n.length,p=m.createElement("a"),q=function(a){return a.crossOrigin!==c}(new Image),r;p.href=a.location.href,g=p.protocol+p.host,i={loadImage:function(b){var d,g;b&&f[b]===c&&(d=new Image,b.match(/data:image\/.*;base64,/i)?(d.src=b.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),g=f[b]={img:d},f.numTotal++,B(d,g)):s(b)||e.allowTaint===!0?(g=f[b]={img:d},f.numTotal++,B(d,g),d.src=b):q&&!e.allowTaint&&e.useCORS?(d.crossOrigin="anonymous",g=f[b]={img:d},f.numTotal++,B(d,g),d.src=b,d.customComplete=function(){this.img.complete?this.img.onerror():this.timer=a.setTimeout(this.img.customComplete,100)}.bind(g),d.customComplete()):e.proxy&&(g=f[b]={img:d},f.numTotal++,u(b,d,g)))},cleanupDOM:function(d){var g,i;if(!f.cleanupDone){d&&typeof d=="string"?h("html2canvas: Cleanup because: "+d):h("html2canvas: Cleanup after timeout: "+e.timeout+" ms.");for(i in f)if(f.hasOwnProperty(i)){g=f[i];if(typeof g=="object"&&g.callbackname&&g.succeeded===c){a[g.callbackname]=c;try{delete a[g.callbackname]}catch(j){}g.script&&g.script.parentNode&&(g.script.setAttribute("src","about:blank"),g.script.parentNode.removeChild(g.script)),f.numLoaded++,f.numFailed++,h("html2canvas: Cleaned up failed img: '"+i+"' Steps: "+f.numLoaded+" / "+f.numTotal)}}a.stop!==c?a.stop():b.execCommand!==c&&b.execCommand("Stop",!1),b.close!==c&&b.close(),f.cleanupDone=!0,(!d||typeof d!="string")&&t()}},renderingDone:function(){r&&a.clearTimeout(r)}},e.timeout>0&&(r=a.setTimeout(i.cleanupDOM,e.timeout)),h("html2canvas: Preload starts: finding background-images"),f.firstRun=!0,A(l),h("html2canvas: Preload: Finding images");for(j=0;j<o;j+=1)i.loadImage(n[j].getAttribute("src"));return f.firstRun=!1,h("html2canvas: Preload: Done."),f.numTotal===f.numLoaded&&t(),i},d.Renderer=function(a,e){function f(a){var b=[],c=function(a){var d=[],e=[];a.children.forEach(function(a){a.children&&a.children.length>0?(d.push(a),e.push(a.zindex)):b.push(a)}),e.sort(function(a,b){return a-b}),e.forEach(function(a){var b;d.some(function(c,d){return b=d,c.zindex===a}),c(d.splice(b,1)[0])})};return c(a.zIndex),b}function g(a){var b;if(typeof e.renderer=="string"&&d.Renderer[a]!==c)b=d.Renderer[a](e);else if(typeof a=="function")b=a(e);else throw new Error("Unknown renderer");if(typeof b!="function")throw new Error("Invalid renderer defined");return b}return g(e.renderer)(a,e,b,f(a),d)},d.Util.Support=function(a,b){function d(){var a=new Image,d=b.createElement("canvas"),e=d.getContext===c?!1:d.getContext("2d");if(e===!1)return!1;d.width=d.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{e.drawImage(a,0,0),d.toDataURL()}catch(f){return!1}return h("html2canvas: Parse: SVG powered rendering available"),!0}function e(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,e===123&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:e(),svgRendering:a.svgRendering&&d()}},a.html2canvas=function(b,c){b=b.length?b:[b];var e,f,g={logging:!1,elements:b,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return g=d.Util.Extend(c,g),d.logging=g.logging,g.complete=function(a){if(typeof g.onpreloaded=="function"&&g.onpreloaded(a)===!1)return;e=d.Parse(a,g);if(typeof g.onparsed=="function"&&g.onparsed(e)===!1)return;f=d.Renderer(e,g),typeof g.onrendered=="function"&&g.onrendered(f)},a.setTimeout(function(){d.Preload(g)},0),{render:function(a,b){return d.Renderer(a,d.Util.Extend(b,g))},parse:function(a,b){return d.Parse(a,d.Util.Extend(b,g))},preload:function(a){return d.Preload(d.Util.Extend(a,g))},log:h}},a.html2canvas.log=h,a.html2canvas.Renderer={Canvas:c},d.Renderer.Canvas=function(a){function j(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function k(a){if(e.indexOf(a.arguments[0].src)===-1){g.drawImage(a.arguments[0],0,0);try{g.getImageData(0,0,1,1)}catch(b){return f=d.createElement("canvas"),g=f.getContext("2d"),!1}e.push(a.arguments[0].src)}return!0}function l(a){return a==="transparent"||a==="rgba(0, 0, 0, 0)"}function m(b,c){switch(c.type){case"variable":b[c.name]=c.arguments;break;case"function":if(c.name==="createPattern"){if(c.arguments[0].width>0&&c.arguments[0].height>0)try{b.fillStyle=b.createPattern(c.arguments[0],"repeat")}catch(d){h("html2canvas: Renderer: Error creating pattern",d.message)}}else c.name==="drawShape"?j(b,c.arguments):c.name==="drawImage"?c.arguments[8]>0&&c.arguments[7]>0&&(!a.taintTest||a.taintTest&&k(c))&&b.drawImage.apply(b,c.arguments):b[c.name].apply(b,c.arguments)}}a=a||{};var d=b,e=[],f=b.createElement("canvas"),g=f.getContext("2d"),i=a.canvas||d.createElement("canvas");return function(a,b,d,e,f){var g=i.getContext("2d"),j,k,n,o,p,q;i.width=i.style.width=b.width||a.ctx.width,i.height=i.style.height=b.height||a.ctx.height,q=g.fillStyle,g.fillStyle=l(a.backgroundColor)&&b.background!==c?b.background:a.backgroundColor,g.fillRect(0,0,i.width,i.height),g.fillStyle=q;if(b.svgRendering&&a.svgRender!==c)g.drawImage(a.svgRender,0,0);else for(k=0,n=e.length;k<n;k+=1)j=e.splice(0,1)[0],j.canvasPosition=j.canvasPosition||{},g.textBaseline="bottom",j.clip&&(g.save(),g.beginPath(),g.rect(j.clip.left,j.clip.top,j.clip.width,j.clip.height),g.clip()),j.ctx.storage&&j.ctx.storage.forEach(m.bind(null,g)),j.clip&&g.restore();return h("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),n=b.elements.length,n===1&&typeof b.elements[0]=="object"&&b.elements[0].nodeName!=="BODY"?(p=f.Util.Bounds(b.elements[0]),o=d.createElement("canvas"),o.width=p.width,o.height=p.height,g=o.getContext("2d"),g.drawImage(i,p.left,p.top,p.width,p.height,0,0,p.width,p.height),i=null,o):i}}})(window,document);